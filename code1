import cv2
import serial
import time
#model = tf.keras.models.load_model('waste_model1.h5')


# Connect to Arduino
arduino = serial.Serial('COM3', 9600)  # Change to your port
time.sleep(2)

# Open camera
cap = cv2.VideoCapture(1)

print("Press 's' to start sorting")

while True:
    ret, frame = cap.read()
    if not ret:
        continue

    cv2.imshow("Waste Detection Camera", frame)

    key = cv2.waitKey(1) & 0xFF

    if key == ord('s'):
        print("recycle")
        arduino.write(b'recycle\n')

    elif key == ord('a'):
        print("non-recycle")                   
        arduino.write(b'non-recycle\n')

    elif key == ord('q'):
        print("Exiting...")
        break

# Cleanup
cap.release()
cv2.destroyAllWindows()
arduino.close()